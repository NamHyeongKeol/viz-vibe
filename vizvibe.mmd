flowchart TD
    %% === PROJECT GOALS ===
    %% Ultimate Goal: Make human-AI collaboration seamless with visual context maps
    %% Current Goal: Expand AI agent integrations to other platforms
    %% @lastActive: antigravity_gemini_auto_sync

    %% === START ===
    %% @project_start [start, closed]
    project_start("Viz Vibe Project Start<br/><sub>Graph-based context management tool<br/>that visualizes coding trajectory<br/>as a Mermaid flowchart, enabling<br/>persistent memory across AI sessions</sub>")

    %% @ultimate_goal [end, opened]
    ultimate_goal("Solve the Context Problem<br/><sub>Enable developers to visualize their<br/>coding journey, persist memory across<br/>sessions, and seamlessly share context<br/>with any AI assistant regardless of platform</sub>")

    %% === COMPLETED WORK ===
    %% @mermaid_native [ai-task, closed]
    mermaid_native("Mermaid Native Format<br/><sub>Migrated from custom JSON schema<br/>to native Mermaid .mmd format,<br/>enabling rendering in GitHub, VS Code,<br/>and any Mermaid-compatible viewer<br/>without additional tooling</sub>")

    %% @claude_code_integration [ai-task, closed]
    claude_code_integration("Claude Code Hook Integration<br/><sub>Implemented hook-based automation<br/>for Claude Code that automatically<br/>reads and updates vizvibe.mmd on<br/>session start and after user messages<br/>using SessionStart/AfterUserMessage hooks</sub>")

    %% @vizvibe_guide [ai-task, closed]
    vizvibe_guide("VIZVIBE.md Guide<br/><sub>Created comprehensive documentation<br/>that teaches AI assistants how to<br/>read, update, and maintain vizvibe.mmd<br/>files, including node states, connection<br/>types, and styling conventions</sub>")

    %% @install_scripts [ai-task, closed]
    install_scripts("CLI Install Scripts<br/><sub>Developed curl-based one-liner<br/>installation scripts that set up<br/>Claude Code hooks and copy templates,<br/>with corresponding uninstall scripts<br/>for clean removal when needed</sub>")

    %% @vscode_extension [ai-task, closed]
    vscode_extension("VS Code Extension<br/><sub>Built VS Code extension featuring<br/>interactive graph visualization of<br/>vizvibe.mmd, click-to-copy node info<br/>for AI prompts, custom editor for<br/>.mmd files, and keyboard shortcuts</sub>")

    %% @lastactive_tracking [ai-task, closed]
    lastactive_tracking("Last Active Tracking<br/><sub>Implemented tracking of the most<br/>recently worked-on node via @lastActive<br/>marker in .mmd comments, with visual<br/>highlighting in graph view and<br/>automatic updates from hooks</sub>")

    %% @design_renewal [ai-task, closed]
    design_renewal("GitHub-Inspired Design<br/><sub>Redesigned graph styling with<br/>GitHub-inspired color palette:<br/>green borders for open tasks,<br/>purple borders for closed tasks,<br/>and highlighted glow for last active</sub>")

    %% @extension_bugfix [ai-task, closed]
    extension_bugfix("Extension Bug Fixes<br/><sub>Fixed regex pattern for extracting<br/>node information from Mermaid syntax,<br/>resolved keybinding conflicts, and<br/>added diagnostic test command for<br/>troubleshooting copy functionality</sub>")

    %% === FUTURE WORK: AI AGENT INTEGRATIONS ===
    %% @vscode_agent_integration [ai-task, opened]
    vscode_agent_integration("VS Code Copilot Integration<br/><sub>Integrate with VS Code's built-in<br/>AI features like GitHub Copilot Chat<br/>to automatically provide trajectory<br/>context when developers ask questions<br/>about their project</sub>")

    %% @cursor_agent_integration [ai-task, opened]
    cursor_agent_integration("Cursor IDE Integration<br/><sub>Implement integration with Cursor IDE<br/>using .cursorrules file to inject<br/>trajectory management instructions<br/>into Cursor's AI assistant context</sub>")

    %% @antigravity_agent_integration [ai-task, opened]
    antigravity_agent_integration("Antigravity AI Integration<br/><sub>Integrate with Google's Antigravity<br/>by injecting VIZVIBE.md content into<br/>~/.gemini/GEMINI.md global rules file<br/>and providing keyboard shortcuts</sub>")

    %% @antigravity_hook_support [ai-task, opened]
    antigravity_hook_support("Antigravity Hook Automation<br/><sub>Apply the same hook-based automation<br/>pattern used in Claude Code once<br/>Antigravity adds support for lifecycle<br/>hooks like SessionStart</sub>")

    %% @codex_cli_integration [ai-task, opened]
    codex_cli_integration("Codex CLI Integration<br/><sub>Implement hook-based integration<br/>for OpenAI's Codex CLI tool, enabling<br/>automatic trajectory reading and<br/>updating during coding sessions</sub>")

    %% === FUTURE WORK: OTHER ===
    %% @hook_path_fix [ai-task, closed]
    hook_path_fix("Hook Path Fix<br/><sub>Fixed hook scripts to use<br/>$CLAUDE_PROJECT_DIR environment variable<br/>instead of relative paths, ensuring<br/>hooks work correctly regardless of<br/>which directory the user runs from</sub>")

    %% @extension_ux_improve [ai-task, closed]
    extension_ux_improve("Extension UX v1<br/><sub>Enhanced node display to show<br/>descriptions from sub tags, added<br/>open/closed/lastActive status indicators<br/>to info card, cleaned up keybinding<br/>behavior and conflicts</sub>")

    %% @extension_ux_v2 [ai-task, closed]
    extension_ux_v2("Graph UX Improvements<br/><sub>Added node dragging functionality<br/>for manual graph layout adjustment,<br/>changed start node color from teal<br/>to muted gray for better visual<br/>hierarchy with focus on active work</sub>")

    %% @antigravity_shortcut [ai-task, closed]
    antigravity_shortcut("Antigravity Shortcut<br/><sub>Implemented Ctrl+Shift+Cmd+E keyboard<br/>shortcut that copies a pre-formatted<br/>prompt to clipboard, asking AI to<br/>update vizvibe.mmd based on recent<br/>conversation history</sub>")

    %% @lib_packaging [ai-task, opened]
    lib_packaging("Multi-Language SDK<br/><sub>Package vizvibe functionality as<br/>installable SDKs for Python (PyPI),<br/>JavaScript (npm), and Java (Maven)<br/>to enable programmatic trajectory<br/>management from any codebase</sub>")

    %% @mcp_server [ai-task, opened]
    mcp_server("MCP Server<br/><sub>Build a Model Context Protocol server<br/>that exposes trajectory read/update<br/>tools, enabling any MCP-compatible<br/>AI client to manage vizvibe.mmd<br/>without platform-specific integrations</sub>")

    %% === CONNECTIONS ===
    project_start --> mermaid_native
    mermaid_native --> claude_code_integration
    mermaid_native --> vscode_extension
    claude_code_integration --> vizvibe_guide
    claude_code_integration --> install_scripts
    claude_code_integration --> lib_packaging
    claude_code_integration --> codex_cli_integration
    vscode_extension --> lastactive_tracking
    lastactive_tracking --> design_renewal
    design_renewal --> extension_bugfix
    vscode_extension --> vscode_agent_integration
    vscode_extension --> cursor_agent_integration
    vscode_extension --> antigravity_agent_integration
    antigravity_agent_integration --> antigravity_hook_support
    mermaid_native --> mcp_server
    claude_code_integration --> hook_path_fix
    extension_bugfix --> extension_ux_improve
    extension_ux_improve --> extension_ux_v2
    antigravity_agent_integration --> antigravity_shortcut
    extension_ux_v2 -.-> ultimate_goal
    antigravity_shortcut -.-> ultimate_goal
    lib_packaging -.-> ultimate_goal
    hook_path_fix -.-> ultimate_goal
    mcp_server -.-> ultimate_goal
    codex_cli_integration -.-> ultimate_goal
    vscode_agent_integration -.-> ultimate_goal
    cursor_agent_integration -.-> ultimate_goal
    antigravity_hook_support -.-> ultimate_goal

    %% === STYLES ===
    %% GitHub-inspired colors: Open = green, Closed = purple/gray

    %% Start node (muted gray - same as end node)
    style project_start fill:#1a1a2e,stroke:#6b7280,color:#9ca3af,stroke-width:1px

    %% Ultimate Goal (muted)
    style ultimate_goal fill:#1a1a2e,stroke:#6b7280,color:#9ca3af,stroke-width:1px

    %% Closed tasks (soft purple - like GitHub merged)
    style mermaid_native fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style claude_code_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style vizvibe_guide fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style install_scripts fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style vscode_extension fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    style lastactive_tracking fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style design_renewal fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    style extension_bugfix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Closed tasks continued
    style hook_path_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style extension_ux_improve fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style extension_ux_v2 fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Last active node (highlighted - brighter purple with glow effect)
    style antigravity_shortcut fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style recent fill:transparent,stroke:#c084fc,color:#c084fc,stroke-width:2px,stroke-dasharray:5 5

    %% Open tasks (soft green - like GitHub open)
    style vscode_agent_integration fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style cursor_agent_integration fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style antigravity_agent_integration fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style antigravity_hook_support fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style codex_cli_integration fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style lib_packaging fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style mcp_server fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px

    %% @version_bump_011 [ai-task, closed]
    version_bump_011["Version 0.1.1<br/><sub>Released version 0.1.1 with node<br/>dragging feature retained, but removed<br/>complex edge-following logic that was<br/>causing visual glitches and incorrect<br/>edge rendering</sub>"]
    antigravity_shortcut --> version_bump_011
    style version_bump_011 fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    
    %% @vscode_marketplace_publish [ai-task, closed]
    vscode_marketplace_publish["VS Code Marketplace<br/><sub>Successfully published Viz Vibe<br/>extension to VS Code Marketplace<br/>as version 0.1.5, making it publicly<br/>available for any VS Code user<br/>to install and use</sub>"]
    version_bump_011 --> vscode_marketplace_publish
    style vscode_marketplace_publish fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    
    %% @antigravity_gemini_integration [ai-task, closed]
    antigravity_gemini_integration["Antigravity GEMINI.md<br/><sub>Implemented automatic injection of<br/>complete VIZVIBE.md content into<br/>~/.gemini/GEMINI.md on extension<br/>activation, with auto-initialization<br/>prompts for new projects (v0.1.12)</sub>"]
    vscode_marketplace_publish --> antigravity_gemini_integration
    antigravity_agent_integration --> antigravity_gemini_integration
    style antigravity_gemini_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    
    %% @claude_code_auto_draft [ai-task, closed]
    claude_code_auto_draft["Claude Code Auto Draft<br/><sub>Implemented SessionStart hook logic<br/>that detects when vizvibe.mmd contains<br/>only the default template, then prompts<br/>Claude to generate an initial trajectory<br/>draft from conversation and git history</sub>"]
    claude_code_integration --> claude_code_auto_draft
    style claude_code_auto_draft fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    
    version_bump_011 -.-> ultimate_goal
    vscode_marketplace_publish -.-> ultimate_goal
    antigravity_gemini_integration -.-> ultimate_goal
    claude_code_auto_draft -.-> ultimate_goal
    

    
    %% @cursor_hook_via_extension [ai-task, closed]
    cursor_hook_via_extension["Cursor Hook via Extension<br/><sub>Extension now auto-detects when<br/>running in Cursor IDE environment<br/>and automatically creates .cursor/<br/>hooks.json with appropriate hook<br/>configurations, eliminating manual setup</sub>"]
    cursor_agent_integration --> cursor_hook_via_extension
    claude_code_integration --> cursor_hook_via_extension
    style cursor_hook_via_extension fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    cursor_hook_via_extension -.-> ultimate_goal
    
    %% @graph_search_feature [ai-task, closed]
    subgraph recent [RECENT]
        graph_search_feature["Graph Search (Cmd+F)<br/><sub>Implement search functionality<br/>in the graph viewer that allows<br/>users to find nodes by title or<br/>description using Cmd+F keyboard<br/>shortcut - TOP PRIORITY feature</sub>"]
    end
    vscode_extension --> graph_search_feature
    style graph_search_feature fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:2px
    style recent fill:transparent,stroke:#4ade80,color:#4ade80,stroke-width:2px,stroke-dasharray:5 5
    graph_search_feature -.-> ultimate_goal
    
    %% @initial_view_focus [ai-task, opened]
    initial_view_focus["Focus RECENT on Open<br/><sub>When vizvibe.mmd first opens,<br/>center the view on RECENT subgraph<br/>instead of top-left corner, with<br/>zoomed-out scale to show context<br/>around active work area</sub>"]
    vscode_extension --> initial_view_focus
    style initial_view_focus fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    initial_view_focus -.-> ultimate_goal
    
    %% @archive_old_nodes [ai-task, opened]
    archive_old_nodes["Archive Old Nodes<br/><sub>Add functionality to separate<br/>old/completed nodes into archive<br/>files, keeping the main vizvibe.mmd<br/>focused on recent and active work<br/>while preserving full history</sub>"]
    vscode_extension --> archive_old_nodes
    style archive_old_nodes fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    archive_old_nodes -.-> ultimate_goal
    
    %% @github_sync_feature [ai-task, opened]
    github_sync_feature["GitHub Sync<br/><sub>Fetch repository info from user's<br/>GitHub account (commits, PRs, issues)<br/>and reflect them in the trajectory<br/>graph automatically, bridging code<br/>changes with visual context</sub>"]
    mermaid_native --> github_sync_feature
    style github_sync_feature fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    github_sync_feature -.-> ultimate_goal
    
    %% @antigravity_gemini_auto_sync [ai-task, opened]
    antigravity_gemini_auto_sync["GEMINI.md Auto Sync<br/><sub>When users update the Viz Vibe<br/>extension to a new version,<br/>automatically sync GEMINI.md with<br/>the latest VIZVIBE.md content<br/>without requiring manual action</sub>"]
    antigravity_gemini_integration --> antigravity_gemini_auto_sync
    style antigravity_gemini_auto_sync fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    antigravity_gemini_auto_sync -.-> ultimate_goal
    
    %% @node_click_detail_view [ai-task, opened]
    node_click_detail_view["Single-Click Node Details<br/><sub>Enable clicking a node in the graph<br/>view to display detailed content that<br/>is visible in the source view, showing<br/>full metadata and descriptions without<br/>needing to switch to source editor</sub>"]
    vscode_extension --> node_click_detail_view
    style node_click_detail_view fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    node_click_detail_view -.-> ultimate_goal
